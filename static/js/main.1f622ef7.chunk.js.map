{"version":3,"sources":["images/checkbox.png","images/main-logo.png","API/aviasales.js","components/flight-list/segment.js","components/flight-list/index.js","components/price-filter/index.js","components/transfer-filter/index.js","components/app.js","serviceWorker.js","index.js"],"names":["module","exports","fetchServerData","url","a","maxRequestsNumber","searchIdRequest","axios","get","Error","InfoWrap","styled","div","Placeholder","p","DurationInfo","SegmentInfo","props","segments","map","info","date","destination","duration","origin","stops","fromTo","originDate","Date","formatOriginDate","format","destinationDate","addMinutes","formatDestinationDate","timeInfo","hours","Math","floor","minutes","durationInfo","key","uniqueId","className","length","join","FlightListWrapper","ListItem","Price","AeroLogoWrap","Index","tickets","ticket","index","id","price","carrier","aeroLogoUrl","formatedPrice","toLocaleString","split","src","alt","defaultProps","PriceFilterWrap","defaultFilterStyles","isActiveFilterStyles","priceFilter","changePriceFilter","sortVisibleTicketsBy","FilterOption1","FilterOption2","handleOnChangeFilter","event","target","getAttribute","name","onClick","TransferFilterWrap","Title","span","CheckboxesWrap","Checkbox","checkboxUrl","changeCheckboxes","checkboxes","handleOnChangeCheckboxes","checked","transferType","newCheckboxes","el","checkboxType","isChecked","checkbox","type","onChange","htmlFor","title","ContentWrapper","Content","MainLogoWrapper","LoaderWrapper","defaultFilterCheckboxes","defaultTicketsList","noTransfer","oneTransfer","twoTransfer","threeTransfer","App","useState","setTickets","visibleTickets","setVisibleTickets","dataLoader","setDataLoader","sortType","sortedFunc","arr","sortBy","currentTickets","getVisibleTickets","show","forEach","getVisibleTicketsByCheckboxes","getTickets","ticketsKeys","Object","keys","aviasalesUrl","fetchSearchId","searchId","data","fetchData","response","newTickets","filter","stop","useEffect","mainLogoSrc","color","height","width","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.1f622ef7.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAICAYAAADN5B7xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC5SURBVHgBjY7NDYJAEIVn9qwRO1grUDvQEqxAznrRCtQKiAfwaKzAWAEl2MJ2oJE1iIF9LkH8iST4bjP53g/TH5JbOHzTe2TmIGrhTSw5voYEGhCLFtfCyEIiSICWatpcCelrVwba+4F93XvBxG4O539BbLpMmHWC6Ci9k1MkRwP7szOMgyTtq0ljVwbxE1iwrbSnYkNrCNhGKCTZUM3b6rOZ33tLU65q+MtQ7L64TDzGPR1Z+EwVegAaYFmyhe9bkAAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/main-logo.d2a4807b.png\";","/* eslint-disable import/prefer-default-export */\nimport axios from 'axios';\n\nexport const fetchServerData = async (url, maxRequestsNumber = 5) => {\n  const searchIdRequest = async () => axios.get(url);\n\n  try {\n    return await searchIdRequest();\n  } catch (error) {\n    if (maxRequestsNumber === 0) throw new Error(error, 'AttemptsLimitExceeded');\n    return fetchServerData(url, maxRequestsNumber - 1);\n  }\n};\n","import React from 'react';\nimport { addMinutes, format } from 'date-fns';\nimport styled from 'styled-components';\nimport { uniqueId } from 'lodash';\n\nconst InfoWrap = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  align-content: space-between;\n  margin: 10px 0px 0px 0px;\n  \n  @media (max-width: 375px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst Placeholder = styled.p`\n  color: #a0b0b9;\n  font-size: 12px;\n  margin: 0;\n  text-transform: uppercase;\n`;\n\nconst DurationInfo = styled.p`\n  color: #4a4a4a;\n  font-size: 14px;\n  margin: 0;\n  text-transform: uppercase;\n`;\n\nconst SegmentInfo = (props) => {\n  const { segments } = props;\n\n  return segments.map((info) => {\n    const {\n      date, destination, duration, origin, stops,\n    } = info;\n    const fromTo = `${origin} - ${destination}`;\n\n    const originDate = new Date(date);\n    const formatOriginDate = format(originDate, 'HH:mm');\n    const destinationDate = addMinutes(originDate, duration);\n    const formatDestinationDate = format(destinationDate, 'HH:mm');\n    const timeInfo = `${formatOriginDate} - ${formatDestinationDate}`;\n\n    const hours = Math.floor(duration / 60);\n    const minutes = duration % 60;\n\n    const durationInfo = `${hours}ч ${minutes}м`;\n    const transferLength = () => {\n      if (stops.length === 0) return 'Без пересадок';\n      if (stops.length === 1) return '1 пересадка';\n      return `${stops.length} пересадки`;\n    };\n\n    return (\n      <InfoWrap key={uniqueId()}>\n        <div className=\"info-element\">\n          <Placeholder>{fromTo}</Placeholder>\n          <DurationInfo>{timeInfo}</DurationInfo>\n        </div>\n        <div className=\"info-element\">\n          <Placeholder>в пути</Placeholder>\n          <DurationInfo>{durationInfo}</DurationInfo>\n        </div>\n        <div className=\"info-element\">\n          <Placeholder>{transferLength()}</Placeholder>\n          <DurationInfo>{stops.join(', ')}</DurationInfo>\n        </div>\n      </InfoWrap>\n    );\n  });\n};\n\nexport default SegmentInfo;\n","import React from 'react';\nimport styled from 'styled-components';\nimport propTypes from 'prop-types';\nimport SegmentInfo from './segment';\n\nconst FlightListWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-basis: 100%;\n`;\n\nconst ListItem = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-basis: 142px;\n  background-color: white;\n  margin: 20px 0px 0px 0px;\n  padding: 20px 20px 20px 20px;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  align-content: space-between;\n  \n  @media (max-width: 375px) {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n  }\n  \n`;\n\nconst Price = styled.div`\n  color: #2196f3;\n  font-size: 24px;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-template-rows: 1fr;\n  margin-bottom: 10px;\n  \n  @media (max-width: 375px) {\n    grid-template-columns: 1fr 1fr;\n    grid-column: 1 / 3;\n  }\n`;\n\nconst AeroLogoWrap = styled.div`\n  display: grid;\n  grid-column: -1 / -2;\n`;\n\nconst Index = (props) => {\n  const { tickets } = props;\n\n  const renderTickets = () => {\n    if (tickets.length === 0) return null;\n    return tickets.map((ticket, index) => {\n      if (index >= 5) return false;\n      const {\n        id, price, carrier, segments,\n      } = ticket;\n      const aeroLogoUrl = `https://pics.avs.io/99/36/${carrier}.png`;\n\n      const formatedPrice = price.toLocaleString().split(',').join(' ');\n\n      return (\n        <ListItem key={id}>\n          <Price>\n            <span>{`${formatedPrice} Р`}</span>\n            <AeroLogoWrap>\n              <img src={aeroLogoUrl} alt=\"aero-brand\" />\n            </AeroLogoWrap>\n          </Price>\n\n          <SegmentInfo segments={segments} />\n        </ListItem>\n      );\n    });\n  };\n  return <FlightListWrapper>{renderTickets()}</FlightListWrapper>;\n};\n\nIndex.propTypes = {\n  tickets: propTypes.arrayOf(propTypes.object),\n};\n\nIndex.defaultProps = {\n  tickets: [],\n};\n\nexport default Index;\n","import React from 'react';\nimport styled from 'styled-components';\nimport propTypes from 'prop-types';\n\nconst PriceFilterWrap = styled.div`\n  display: flex;\n  flex-direction: row;\n  text-align: center;\n  line-height: 50px;\n  flex-basis: 50px;\n  text-transform: uppercase;\n  font-size: 12px;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n`;\nconst defaultFilterStyles = `\n    color: #4A4A4A;\n    background-color: #FFFFFF;\n    height: inherit;\n    flex-grow: 1;\n    cursor: pointer;\n  `;\nconst isActiveFilterStyles = `\n    color: #FFFFFF;\n    background-color: #2196F3;\n    height: inherit;\n    flex-grow: 1;\n  `;\n\nconst Index = (props) => {\n  const {\n    priceFilter, changePriceFilter, sortVisibleTicketsBy,\n  } = props;\n  const FilterOption1 = styled.div`\n    ${priceFilter === 'cheapest' ? isActiveFilterStyles : defaultFilterStyles}\n    border-radius: 5px 0px 0px 5px;\n  `;\n  const FilterOption2 = styled.div`\n    ${priceFilter === 'fastest' ? isActiveFilterStyles : defaultFilterStyles}\n    border-radius: 0px 5px 5px 0px;\n  `;\n\n  const handleOnChangeFilter = (event) => {\n    switch (event.target.getAttribute('name')) {\n      case 'cheapest': {\n        changePriceFilter('cheapest');\n        sortVisibleTicketsBy('cheapest');\n        break;\n      }\n      case 'fastest': {\n        changePriceFilter('fastest');\n        sortVisibleTicketsBy('fastest');\n        break;\n      }\n      default: {\n        changePriceFilter('cheapest');\n      }\n    }\n  };\n\n  return (\n    <PriceFilterWrap>\n      <FilterOption1 name=\"cheapest\" onClick={handleOnChangeFilter}>\n        Самый дешевый\n      </FilterOption1>\n      <FilterOption2 name=\"fastest\" onClick={handleOnChangeFilter}>\n        Самый быстрый\n      </FilterOption2>\n    </PriceFilterWrap>\n  );\n};\n\nIndex.propTypes = {\n  priceFilter: propTypes.string,\n  changePriceFilter: propTypes.func,\n  sortVisibleTicketsBy: propTypes.func,\n\n};\n\nIndex.defaultProps = {\n  priceFilter: 'cheapest',\n  changePriceFilter: null,\n  sortVisibleTicketsBy: null,\n};\n\nexport default Index;\n","import React from 'react';\nimport propTypes from 'prop-types';\nimport styled from 'styled-components';\nimport checkboxUrl from '../../images/checkbox.png';\n\nconst TransferFilterWrap = styled.div`\n  max-width: 190px;\n  max-height: 212px;\n  height: 200px;\n  flex-grow: 1;\n  height: 252px;\n  margin-right: 20px;\n  background-color: white;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  padding: 20px 0px 20px 0px;\n  display: flex;\n  flex-direction: column;\n  \n  @media (max-width: 600px) {\n    flex-direction: column;\n    max-height: 100px;\n    max-width: 100vw;\n    margin: 0px 0px 20px 0px;\n    height: auto;\n    flex-basis: 100%;\n    \n    & > span {\n      display: flex;\n      flex-direction: column;\n      text-align: center;\n      padding-left: 0px;\n      padding-bottom: 0px;\n    }\n    \n    & > div {\n      display: grid;\n      grid-template-columns: 1fr 1fr 1fr;\n      grid-gap: 10px;\n      margin-top: 10px;\n      padding: 0px 0px 0px 40px;\n    }\n    & > div > div {\n      padding: 0;\n    }\n  }\n  \n  @media (max-width: 470px) {\n    max-height: 200px;\n    & > div {\n      grid-template-columns: 1fr 1fr;\n      padding: 0px 0px 0px 30px;\n    }\n  }\n  \n  @media (max-width: 360px) {\n    & > div {\n      grid-template-columns: 1fr;\n      padding: 0px 0px 0px 20px;\n    }\n  }\n`;\n\nconst Title = styled.span`\n  padding-left: 20px;\n  padding-bottom: 5px;\n`;\n\nconst CheckboxesWrap = styled.div`\n  \n  @media (max-width: 600px) {\n    display: flex;\n    flex-direction: row;\n  }\n`;\n\nconst Checkbox = styled.div`\n  padding: 10px 20px;\n  cursor: pointer;\n  background-color: #ffffff;\n  \n  &:hover {\n    background-color: #f1fcff;\n  }\n  \n  & > input[type='checkbox'] {\n    display: none;\n  }\n  \n  & > input[type='checkbox'] + label span {\n    display: inline-block;\n    width: 20px;\n    height: 20px;\n    margin: -1px 10px 0 0;\n    vertical-align: middle;\n    cursor: pointer;\n    border-radius: 2px;\n    border: 1px solid #9abbce;\n  }\n  & > label {\n    cursor: pointer;\n  }\n  & > input[type='checkbox']:checked + label span {\n    background: url(${checkboxUrl}) center center no-repeat;\n    border: 1px solid #2196f3;\n  }\n`;\n\nconst Index = (props) => {\n  const { changeCheckboxes, checkboxes } = props;\n\n  const handleOnChangeCheckboxes = (event) => {\n    const { checked } = event.target;\n    const transferType = event.target.name;\n    // если клик по \"все\", то актив/деактив состояние всех чекбоксов\n    if (transferType === 'all') {\n      const newCheckboxes = checkboxes.map((el) => ({ ...el, isChecked: checked }));\n      changeCheckboxes(() => (newCheckboxes));\n      return;\n    }\n\n    // либо изменить состояние только одного\n    const newCheckboxes = checkboxes.map((el) => {\n      if (el.checkboxType === transferType) return { ...el, isChecked: checked };\n      return el;\n    });\n    changeCheckboxes(() => (newCheckboxes));\n  };\n\n  return (\n    <TransferFilterWrap>\n      <Title>КОЛИЧЕСТВО ПЕРЕСАДОК</Title>\n      <CheckboxesWrap>\n        {checkboxes.map((checkbox) => (\n          <Checkbox key={checkbox.id} className=\"checkbox-wrap\">\n            <input\n              checked={checkbox.isChecked}\n              type=\"checkbox\"\n              className=\"filter-checkbox\"\n              id={checkbox.checkboxType}\n              name={checkbox.checkboxType}\n              onChange={handleOnChangeCheckboxes}\n            />\n            <label htmlFor={checkbox.checkboxType}>\n              <span />\n              {checkbox.title}\n            </label>\n          </Checkbox>\n        ))}\n      </CheckboxesWrap>\n    </TransferFilterWrap>\n  );\n};\n\nIndex.propTypes = {\n  changeCheckboxes: propTypes.func,\n  checkboxes: propTypes.arrayOf(propTypes.object),\n};\n\nIndex.defaultProps = {\n  changeCheckboxes: null,\n  checkboxes: [],\n};\n\nexport default Index;\n","import React, { useState, useEffect } from 'react';\nimport { sortBy, uniqueId } from 'lodash';\nimport styled from 'styled-components';\nimport Loader from 'react-loader-spinner';\nimport { fetchServerData } from '../API/aviasales';\nimport FlightList from './flight-list';\nimport PriceFilter from './price-filter';\nimport TransferFilter from './transfer-filter';\nimport mainLogoSrc from '../images/main-logo.png';\n\nconst ContentWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  max-width: 768px;\n  margin: 0px auto 0px auto;\n  color: #4a4a4a;\n  \n  @media (max-width: 600px) {\n    flex-direction: column;\n  }\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n`;\n\nconst MainLogoWrapper = styled.div`\n  margin: 30px auto 30px auto;\n  text-align: center;\n`;\n\nconst LoaderWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-basis: 100%;\n`;\n\nconst defaultFilterCheckboxes = [\n  {\n    isChecked: true, title: 'Все', checkboxType: 'all', id: uniqueId(),\n  },\n  {\n    isChecked: true, title: 'Без пересадок', checkboxType: 'noTransfer', id: uniqueId(),\n  },\n  {\n    isChecked: true, title: '1 пересадка', checkboxType: 'oneTransfer', id: uniqueId(),\n  },\n  {\n    isChecked: true, title: '2 пересадки', checkboxType: 'twoTransfer', id: uniqueId(),\n  },\n  {\n    isChecked: true, title: '3 пересадки', checkboxType: 'threeTransfer', id: uniqueId(),\n  },\n];\n\nconst defaultTicketsList = {\n  noTransfer: [],\n  oneTransfer: [],\n  twoTransfer: [],\n  threeTransfer: [],\n};\n\nconst App = () => {\n  const [checkboxes, changeCheckboxes] = useState(defaultFilterCheckboxes);\n  const [priceFilter, changePriceFilter] = useState('cheapest'); // cheapest, fastest\n\n  // все билеты\n  const [tickets, setTickets] = useState(defaultTicketsList);\n\n  // видимые на странице билеты\n  const [visibleTickets, setVisibleTickets] = useState([]);\n\n  const [dataLoader, setDataLoader] = useState(true);\n\n  // вспомогательная функция для уменьшения дублирования при setTickets\n  const getTicketsKeys = () => Object.keys(defaultTicketsList);\n\n  const sortVisibleTicketsBy = (sortType) => {\n    let sortedFunc;\n    switch (sortType) {\n      case 'cheapest': {\n        sortedFunc = (arr) => sortBy(arr, ['price']);\n        break;\n      }\n      case 'fastest': {\n        sortedFunc = (arr) => sortBy(arr, ['segments[0].duration']);\n        break;\n      }\n      default: sortedFunc = (arr) => sortBy(arr, (ticket) => ticket.price);\n    }\n\n    setVisibleTickets((currentTickets) => ([\n      ...sortedFunc(currentTickets),\n    ]));\n  };\n\n  const getVisibleTickets = () => {\n    const getVisibleTicketsByCheckboxes = () => {\n      let show = [];\n      // заполняем массив видимых билетов в зависимости от активных чекбоксов\n      checkboxes.forEach((el) => {\n        const { isChecked, checkboxType } = el;\n        if (checkboxType === 'all') return;\n        if (isChecked === true) {\n          show = [...show, ...tickets[checkboxType]];\n        }\n      });\n      return [...show];\n    };\n    setVisibleTickets(() => [...getVisibleTicketsByCheckboxes()]);\n    sortVisibleTicketsBy(priceFilter);\n  };\n\n  const getTickets = async () => {\n    const ticketsKeys = getTicketsKeys();\n    const aviasalesUrl = 'https://front-test.beta.aviasales.ru/';\n    const fetchSearchId = await fetchServerData(`${aviasalesUrl}search`);\n    const { searchId } = fetchSearchId.data;\n    const fetchData = async () => {\n      const response = await fetchServerData(\n        `${aviasalesUrl}tickets?searchId=${searchId}`,\n      );\n\n      // уникальный id для билетов\n      const newTickets = response.data.tickets.map((el) => ({ ...el, id: uniqueId() }));\n\n      // сортировка каждой новой пачки билетов\n      setTickets((currentTickets) => ({\n        [ticketsKeys[0]]: [\n          ...currentTickets[ticketsKeys[0]],\n          ...newTickets.filter((ticket) => ticket.segments[0].stops.length === 0),\n        ],\n        [ticketsKeys[1]]: [\n          ...currentTickets[ticketsKeys[1]],\n          ...newTickets.filter((ticket) => ticket.segments[0].stops.length === 1),\n        ],\n        [ticketsKeys[2]]: [\n          ...currentTickets[ticketsKeys[2]],\n          ...newTickets.filter((ticket) => ticket.segments[0].stops.length === 2),\n        ],\n        [ticketsKeys[3]]: [\n          ...currentTickets[ticketsKeys[3]],\n          ...newTickets.filter((ticket) => ticket.segments[0].stops.length === 3),\n        ],\n      }));\n      if (response.data.stop === true) {\n        setDataLoader(false);\n      }\n      if (response.data.stop === false) {\n        await fetchData();\n      }\n    };\n\n    await fetchData();\n  };\n\n  useEffect(() => {\n    // грузим билеты пока отдаёт сервер\n    if (dataLoader === true) getTickets();\n    // показываем после загрузки\n    if (dataLoader === false) getVisibleTickets();\n  }, [dataLoader, checkboxes, priceFilter]);\n\n  const renderFlightList = () => {\n    if (dataLoader === true) {\n      return (\n        <LoaderWrapper>\n          <Loader type=\"Bars\" color=\"#2196F3\" height={100} width={100} />\n        </LoaderWrapper>\n      );\n    }\n    return <FlightList tickets={visibleTickets} />;\n  };\n  return (\n    <div className=\"main-wrapper\">\n      <MainLogoWrapper className=\"main-logo-wrapper\">\n        <img src={mainLogoSrc} alt=\"Логотип aviasales\" />\n      </MainLogoWrapper>\n\n      <ContentWrapper>\n        <TransferFilter\n          checkboxes={checkboxes}\n          changeCheckboxes={changeCheckboxes}\n        />\n\n        <Content>\n          <PriceFilter\n            priceFilter={priceFilter}\n            changePriceFilter={changePriceFilter}\n            sortVisibleTicketsBy={sortVisibleTicketsBy}\n          />\n          {renderFlightList()}\n        </Content>\n      </ContentWrapper>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}